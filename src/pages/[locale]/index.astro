---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Hero from '../../components/Hero.astro';
import Features from '../../components/Features.astro';
import FAQ from '../../components/FAQ.astro';
import Pricing from '../../components/Pricing.astro';
import LatestBlogPosts from '../../components/LatestBlogPosts.astro';
import ContactForm from '../../components/ContactForm.astro';
import Footer from '../../components/Footer.astro';
import { useTranslations, type Locale } from '../../i18n/utils';

export async function getStaticPaths() {
	return [
		{ params: { locale: 'no' } },
		{ params: { locale: 'en' } },
	];
}

const { locale } = Astro.params as { locale: Locale };
const t = useTranslations(locale);
---

<BaseLayout
	locale={locale}
	title={t.meta.home.title}
	description={t.meta.home.description}
>
	<Header locale={locale} currentPath={Astro.url.pathname} />
	<Hero locale={locale} />
	<Features locale={locale} />
	<FAQ locale={locale} />

	<!-- FAQ Structured Data for Rich Snippets -->
	<script type="application/ld+json" set:html={JSON.stringify({
		"@context": "https://schema.org",
		"@type": "FAQPage",
		"mainEntity": t.faq.items.map((item: any) => ({
			"@type": "Question",
			"name": item.question,
			"acceptedAnswer": {
				"@type": "Answer",
				"text": item.answer
			}
		}))
	})} />

	<Pricing locale={locale} />
	{locale === 'no' && <LatestBlogPosts />}
	<ContactForm locale={locale} />
	<Footer locale={locale} />
</BaseLayout>
